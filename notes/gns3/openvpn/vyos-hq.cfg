set firewall all-ping 'enable'
set firewall broadcast-ping 'disable'
set firewall config-trap 'disable'
set firewall group network-group BRANCH1-SUBNET-V4 network '172.16.42.0/24'
set firewall group network-group PARTNER1-SUBNET-V4 network '172.16.63.0/24'
set firewall ipv6-receive-redirects 'disable'
set firewall ipv6-src-route 'disable'
set firewall ip-src-route 'disable'
set firewall log-martians 'enable'
set firewall name DENY-ALL default-action 'reject'
set firewall name DENY-BRANCH-2-PARTNER default-action 'accept'
set firewall name DENY-BRANCH-2-PARTNER rule 1 action 'reject'
set firewall name DENY-BRANCH-2-PARTNER rule 1 destination group network-group 'PARTNER1-SUBNET-V4'
set firewall name DENY-BRANCH-2-PARTNER rule 1 source group network-group 'BRANCH1-SUBNET-V4'
set firewall receive-redirects 'disable'
set firewall send-redirects 'enable'
set firewall source-validation 'disable'
set firewall syn-cookies 'enable'
set firewall twa-hazards-protection 'disable'
set interfaces ethernet eth1 address '21.0.0.2/30'
set interfaces ethernet eth1 hw-id '0c:91:55:08:05:00'
set interfaces ethernet eth2 hw-id '0c:91:55:08:05:02'
set interfaces ethernet eth3 hw-id '0c:91:55:08:05:03'
set interfaces ethernet eth4 address '172.16.21.1/24'
set interfaces ethernet eth4 hw-id '0c:91:55:08:05:01'
set interfaces loopback lo
set interfaces openvpn vtun1 local-port '1194'
set interfaces openvpn vtun1 mode 'server'
set interfaces openvpn vtun1 persistent-tunnel
set interfaces openvpn vtun1 protocol 'udp'
set interfaces openvpn vtun1 server client branch1 ip '169.254.0.10'
set interfaces openvpn vtun1 server client branch1 push-route '172.16.63.0/24'
set interfaces openvpn vtun1 server client branch1 subnet '172.16.42.0/24'
set interfaces openvpn vtun1 server client partner1 ip '169.254.0.20'
set interfaces openvpn vtun1 server client partner1 push-route '172.16.42.0/24'
set interfaces openvpn vtun1 server client partner1 subnet '172.16.63.0/24'
set interfaces openvpn vtun1 server push-route '172.16.21.0/24'
set interfaces openvpn vtun1 server push-route '169.254.0.0/24'
set interfaces openvpn vtun1 server subnet '169.254.0.0/24'
set interfaces openvpn vtun1 tls ca-cert-file '/config/auth/ovpn/ca.crt'
set interfaces openvpn vtun1 tls cert-file '/config/auth/ovpn/central.crt'
set interfaces openvpn vtun1 tls dh-file '/config/auth/ovpn/dh.pem'
set interfaces openvpn vtun1 tls key-file '/config/auth/ovpn/central.key'
set interfaces openvpn vtun1 use-lzo-compression
set protocols static interface-route 172.16.0.0/12 next-hop-interface vtun1
set protocols static route 0.0.0.0/0 next-hop 21.0.0.1
set service dhcp-server shared-network-name mypool authoritative
set service dhcp-server shared-network-name mypool subnet 172.16.21.0/24 default-router '172.16.21.1'
set service dhcp-server shared-network-name mypool subnet 172.16.21.0/24 lease '86400'
set service dhcp-server shared-network-name mypool subnet 172.16.21.0/24 range 0 start '172.16.21.2'
set service dhcp-server shared-network-name mypool subnet 172.16.21.0/24 range 0 stop '172.16.21.200'
set service ssh port '22'
set system config-management commit-revisions '100'
set system console device ttyS0 speed '115200'
set system host-name 'vyos-hq'
set system login user vyos authentication encrypted-password '$6$IFLswDzIbRDO$ZA9naBRakJEMsTtC9anvTJQoyPCkG7Dy.aLxdT99DKNkxsEVnsk3oZNmK54tFkRWBHiEKx/MP488JxzuohBZ11'
set system login user vyos authentication plaintext-password ''
set system ntp server 0.pool.ntp.org
set system ntp server 1.pool.ntp.org
set system ntp server 2.pool.ntp.org
set system syslog global facility all level 'info'
set system syslog global facility protocols level 'debug'
